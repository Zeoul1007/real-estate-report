<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Report Maker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            text-align: center;
            padding: 20px;
        }
        h1 {
            color: #2c3e50;
        }
        .container {
            max-width: 600px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }
        input, button {
            width: 90%;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        #results {
            margin-top: 20px;
            text-align: left;
        }
        #autocomplete-results {
            background: white;
            border: 1px solid #ddd;
            position: absolute;
            width: 89%;
            max-height: 200px;
            overflow-y: auto;
            display: none;
            z-index: 10;
        }
        .autocomplete-item {
            padding: 10px;
            cursor: pointer;
        }
        .autocomplete-item:hover {
            background: #f1f1f1;
        }
        .logo {
            max-width: 200px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="{{ url_for('static', filename='payitforward_logo.png') }}" alt="Pay It Forward Realty" class="logo">
        <h1>üè° Real Estate Report Maker</h1>
        <p>Enter property addresses (comma-separated):</p>
        <input type="text" id="address-input" name="addresses" placeholder="e.g., 123 Main St, 456 Elm St">
        <div id="autocomplete-results"></div>
        <button onclick="submitForm()">Generate Report</button>
        
        <div id="results">
            {% if report %}
                <h2>üìä Market Summary:</h2>
                <p>{{ report | safe }}</p>
            {% endif %}
        </div>
    </div>

    <script>
        // Autocomplete Functionality
        document.getElementById("address-input").addEventListener("input", function() {
            let query = this.value;
            if (query.length < 3) {
                document.getElementById("autocomplete-results").style.display = "none";
                return;
            }

            fetch(`/autocomplete?query=${encodeURIComponent(query)}`)
                .then(response => response.json())
                .then(data => {
                    let resultsContainer = document.getElementById("autocomplete-results");
                    resultsContainer.innerHTML = "";
                    resultsContainer.style.display = "block";

                    data.forEach(item => {
                        let div = document.createElement("div");
                        div.textContent = item.address;
                        div.classList.add("autocomplete-item");
                        div.onclick = function() {
                            let input = document.getElementById("address-input");
                            input.value = input.value ? input.value + ", " + item.address : item.address;
                            resultsContainer.style.display = "none";
                        };
                        resultsContainer.appendChild(div);
                    });
                });
        });

        function submitForm() {
            let input = document.getElementById("address-input").value;
            if (!input) {
                alert("Please enter at least one address.");
                return;
            }

            let form = document.createElement("form");
            form.method = "POST";
            form.action = "/";

            let inputField = document.createElement("input");
            inputField.type = "hidden";
            inputField.name = "addresses";
            inputField.value = input;

            form.appendChild(inputField);
            document.body.appendChild(form);
            form.submit();
        }
    </script>
</body>
</html>



