<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real Estate Report Maker</title>
    <script>
        async function fetchSuggestions() {
            const query = document.getElementById("addressInput").value;
            if (query.length < 3) return;

            const response = await fetch(`/autocomplete?query=${query}`);
            const suggestions = await response.json();
            
            let suggestionList = document.getElementById("suggestions");
            suggestionList.innerHTML = "";
            suggestions.forEach(addr => {
                let item = document.createElement("div");
                item.textContent = addr;
                item.onclick = function() { addAddress(addr); };
                suggestionList.appendChild(item);
            });
        }

        function addAddress(address) {
            let inputField = document.getElementById("selectedAddresses");
            inputField.value += (inputField.value ? ", " : "") + address;
            document.getElementById("suggestions").innerHTML = "";
        }
    </script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #suggestions div { cursor: pointer; padding: 5px; border: 1px solid #ddd; }
        #suggestions div:hover { background: #f0f0f0; }
    </style>
</head>
<body>
    <h1>üè° Real Estate Report Maker</h1>
    <img src="/static/logo.png" alt="Pay It Forward Realty" width="200"><br><br>
    
    <form method="post">
        <input type="text" id="addressInput" placeholder="Start typing an address..." onkeyup="fetchSuggestions()">
        <div id="suggestions"></div>
        <input type="hidden" name="addresses" id="selectedAddresses">
        <br><br>
        <button type="submit">Generate Report</button>
    </form>

    {% if report %}
        <h2>üìä Market Summary:</h2>
        <p>{{ report | safe }}</p>
    {% endif %}
</body>
</html>



